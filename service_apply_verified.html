<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>서비스 신청 - AI Curator</title>
  <link rel="icon" type="image/x-icon" href="assets/favicon.ico">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link href="assets/css/tailwind.min.css" rel="stylesheet">
  <link rel="stylesheet" href="assets/css/common.css">
  <script src="js/bootstrap.js"></script>
  <script src="js/theme-manager.js"></script>
  <script src="js/common.js"></script>

  <!-- 다국어 관련 스크립트 -->
    <script src="lang/en.js"></script>
    <script src="lang/ko.js"></script>
    <script src="lang/ja.js"></script>
    <script src="lang/zh.js"></script>
    <script src="lang/ru.js"></script>
    <script src="lang/es.js"></script>
    <script src="lang/pt.js"></script>
    <script src="lang/ar.js"></script>
    <script src="lang/vi.js"></script>
    <script src="lang/id.js"></script>
    <script src="lang/fr.js"></script>
    <script src="lang/hi.js"></script>
    <script src="js/translate.js"></script>

  <style>
    /* 이 페이지에서만 사용되는 고유한 스타일 */
    .card-hover:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px -5px rgba(124, 58, 237, 0.3);
        transition: all 0.3s ease;
    }
    
    .glass-effect {
        background: #1a1f2e;
        border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    /* 모바일 최적화 */
    @media (max-width: 768px) {
        .card-hover:hover {
            transform: none;
        }
    }
    .btn-primary {
        background: linear-gradient(90deg, var(--gradient-start), var(--gradient-end));
        color: white;
        padding: 0.75rem 1.5rem;
        border-radius: 9999px;
        font-weight: 500;
        transition: opacity 0.3s ease;
    }
    .btn-primary:hover {
        opacity: 0.9;
    }
    .btn-secondary {
        background: var(--hover-bg);
        color: var(--text-primary);
        padding: 0.75rem 1.5rem;
        border-radius: 9999px;
        font-weight: 500;
        transition: all 0.3s ease;
    }
    .btn-secondary:hover {
        background: var(--border-color);
    }
    .input-field {
        width: 100%;
        padding: 0.75rem 1rem;
        border: 1.5px solid #2d3748;
        border-radius: 0.75rem;
        background-color: var(--card-bg);
        color: var(--text-primary);
        font-size: 1rem;
        transition: all 0.3s ease;
    }
    .input-field:focus {
        outline: none;
        border-color: #2d3748;
        box-shadow: 0 0 0 2px rgba(45, 55, 72, 0.08);
    }
    .form-container {
        background-color: var(--card-bg);
        border-radius: 1.25rem;
        padding: 2.5rem;
        box-shadow: 0 2px 8px rgba(0,0,0,0.04);
        border: 1.5px solid #2d3748;
    }
    .form-label {
        color: var(--text-primary);
        font-weight: 500;
        margin-bottom: 1.3rem;
    }
    select.input-field {
        appearance: none;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='white'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: right 0.75rem center;
        background-size: 1.5em;
        padding-right: 2.5rem;
        border: 1.5px solid #2d3748;
    }
    .paypal-card {
      max-width: 600px;
      margin: 0 auto;
      background: var(--bg-secondary, #181c24);
      border-radius: 1.5rem;
      box-shadow: 0 4px 24px 0 rgba(0,0,0,0.12);
      padding: 2.5rem 2rem 2rem 2rem;
      border: 1.5px solid #2d3748;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    #paypal-button-container {
      width: 100%;
      max-width: 480px;
      margin: 0 auto;
    }
    #paypal-button-container > div {
      max-width: 480px !important;
      margin: 0 auto !important;
    }
    .payment-title {
      font-size:2rem; font-weight:700; color:#fff; text-align:center; margin-bottom:1.5rem; letter-spacing:-1px;
    }
    .payment-divider {
      height:4px;
      width:100%;
      max-width:600px;
      margin:0 auto 2.5rem auto;
      background:linear-gradient(90deg,#a3ff6a 60%,#00ffb3 100%);
      border-radius:2px;
    }
  </style>
 
<!-- 공통 인증 모듈 -->
<script type="module" src="js/auth-manager.js"></script>

</head>
<body>
  <div id="header-container"></div>


<div class="max-w-full sm:max-w-2xl md:max-w-3xl lg:max-w-4xl mx-auto p-6 pt-32">
  <!-- 상단 타이틀 및 소개 카드 섹션 추가 -->
  <h1 class="text-3xl font-bold mb-6" style="color:var(--text-primary);">Verified Listing Service 신청하기</h1>
  <div style="height:4px;width:100%;background:linear-gradient(90deg,#ffee02 60%,#fffb00 100%);border-radius:2px;margin-bottom:1.2rem;"></div>
  <div style="background:var(--bg-secondary);border:1.5px solid #2d3748;border-radius:1.25rem;padding:1.5rem 2rem;margin-bottom:2rem;">
    <ul style="color:var(--text-primary);font-size:1.1rem;line-height:2;">
      <li style="display:flex;align-items:center;gap:0.7em;">
        <span style="display:inline-flex;align-items:center;">
          <svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="14" cy="14" r="14" fill="#23293a"/><path d="M8 15.5L12.2 19L20 10" stroke="#22c55e" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </span>
        검증 및 등록 3일
      </li>
      <li style="display:flex;align-items:center;gap:0.7em;">
        <span style="display:inline-flex;align-items:center;">
          <svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="14" cy="14" r="14" fill="#23293a"/><path d="M8 15.5L12.2 19L20 10" stroke="#22c55e" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </span>
        인증 뱃지 부여
      </li>
      <li style="display:flex;align-items:center;gap:0.7em;">
        <span style="display:inline-flex;align-items:center;">
          <svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="14" cy="14" r="14" fill="#23293a"/><path d="M8 15.5L12.2 19L20 10" stroke="#22c55e" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </span>
        추천 필터에 포함
      </li>
      <li style="display:flex;align-items:center;gap:0.7em;">
        <span style="display:inline-flex;align-items:center;">
          <svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="14" cy="14" r="14" fill="#23293a"/><path d="M8 15.5L12.2 19L20 10" stroke="#22c55e" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </span>
        트렌드 30일 / 셀렉션 50일
      </li>
      <li style="display:flex;align-items:center;gap:0.7em;">
        <span style="display:inline-flex;align-items:center;">
          <svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="14" cy="14" r="14" fill="#23293a"/><path d="M8 15.5L12.2 19L20 10" stroke="#22c55e" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </span>
        구글 검색 색인 지원 및 공식 SNS 추천천
      </li>
    </ul>
  </div>
    <form action="#" method="POST" class="form-container space-y-4 mt-10">
      <div>
        <label class="form-label">AI 도구 이름</label>
        <input type="text" name="toolName" class="input-field mt-2" placeholder="등록 희망하는 AI 이름을 입력하세요" required>
      </div>
      <div>
        <label class="form-label">AI URL</label>
        <input type="url" name="toolUrl" class="input-field mt-2" placeholder="등록 희망하는 AI URL 입력하세요">
      </div>
      <div class="flex gap-2">
        <div class="flex-1">
          <label class="form-label">Main Category</label>
          <select name="mainCategory" class="input-field mt-2">
            <option value="Image">Image</option>
            <option value="Text">Text</option>
            <option value="Video">Video</option>
            <!-- 필요시 추가 -->
          </select>
        </div>
        <div class="flex-1">
          <label class="form-label">Subcategory 1</label>
          <select name="subcategory1" class="input-field mt-2">
            <option value="Art">Art</option>
            <option value="Utility">Utility</option>
            <!-- 필요시 추가 -->
          </select>
        </div>
        <div class="flex-1">
          <label class="form-label">Subcategory 2</label>
          <select name="subcategory2" class="input-field mt-2">
            <option value="Marketing">Marketing</option>
            <option value="Education">Education</option>
            <!-- 필요시 추가 -->
          </select>
        </div>
      </div>
      <div>
        <label class="form-label">Short & Core Description</label>
        <input type="text" name="shortDesc" class="input-field mt-2" placeholder="한 문장으로 요약 및 소개">
      </div>
      <div>
        <label class="form-label">Detail Description</label>
        <textarea name="detailDesc" rows="3" class="input-field mt-2" placeholder="자세한 설명, 특징 등"></textarea>
      </div>
      <div>
        <label class="form-label">Pros</label>
        <input type="text" name="pros" class="input-field mt-2" placeholder="AI의 장점(예: 실사 이미지 생성, 무료, 3D 등)">
      </div>
      <div>
        <label class="form-label">Cons</label>
        <input type="text" name="cons" class="input-field mt-2" placeholder="AI의 단점(예: 이미지 품질, 수정 불가 등)">
      </div>
      <div>
        <label class="form-label">Main Keyword</label>
        <input type="text" name="mainKeyword" class="input-field mt-2" placeholder="AI 소개 키워드(예: 이미지, 마케팅, 아트)">
      </div>
      <div class="flex gap-2">
        <div class="flex-1">
          <label class="form-label">AI Launching Date</label>
          <input type="date" name="launchDate" class="input-field mt-2 w-full" style="min-width:0;">
        </div>
        <div class="flex-1">
          <label class="form-label">AI Monthly User</label>
          <input type="text" name="monthlyUser" class="input-field mt-2 w-full" placeholder="월간 사용자 수" style="min-width:0;">
        </div>
      </div>
      <div class="flex flex-col gap-2" id="price-condition-list">
        <div class="flex gap-2 items-end price-condition-row">
          <div class="flex-1">
            <label class="form-label">AI Price Type & Condition</label>
            <select name="priceType[]" class="input-field mt-2 w-full" style="min-width:0;">
              <option value="Free">Free</option>
              <option value="Paid">Paid</option>
              <option value="Freemium">Freemium</option>
            </select>
          </div>
          <div class="flex-1">
            <input type="text" name="priceCondition[]" class="input-field mt-2 w-full" placeholder="조건, 단위, 요건 등" style="min-width:0;">
          </div>
          <button type="button" class="btn-secondary px-3 py-2 add-price-row">+</button>
        </div>
      </div>
      <div>
        <label class="form-label">AI Image Logo</label>
        <div class="grid grid-cols-2 gap-4 mb-2">
          <input type="file" name="logo1" class="input-field mt-2" accept="image/*">
          <input type="file" name="logo2" class="input-field mt-2" accept="image/*">
        </div>
      </div>
      <div>
        <label class="form-label">AI Screen shot</label>
        <div class="grid grid-cols-2 gap-4 mb-2">
          <input type="file" name="screenshot1" class="input-field mt-2" accept="image/*">
          <input type="file" name="screenshot2" class="input-field mt-2" accept="image/*">
          <input type="file" name="screenshot3" class="input-field mt-2" accept="image/*">
          <input type="file" name="screenshot4" class="input-field mt-2" accept="image/*">
        </div>
        <div class="text-gray-400 text-sm ml-1 mb-4">** 스크린샷 사이즈 가로 * 세로 ( 400*500 )</div>
      </div>
      <div>
        <label class="form-label">Youtube URL</label>
        <input type="url" name="youtubeUrl" class="input-field mt-2" placeholder="Youtube URL">
      </div>
      <div>
        <label class="form-label">Company name</label>
        <input type="text" name="companyName" class="input-field mt-2" placeholder="회사명">
      </div>
      <div>
        <label class="form-label">Company URL</label>
        <input type="url" name="companyUrl" class="input-field mt-2" placeholder="회사 홈페이지 URL">
      </div>
      <div>
        <button type="button" id="submitButton" class="btn-primary w-full">신청 제출</button>
      </div>
    </form>
  </div>

  <!-- 결제 안내 및 PayPal 영역 -->
  <div id="payment-section" style="display:none; margin-top:48px; margin-bottom:48px;">
    <div class="payment-title">
      결제 수단을 선택해주세요 <span style="color:#a3ff6a;">( Paypal / 신용카드 )</span>
    </div>
    <div class="payment-divider"></div>
    <div class="paypal-card">
      <div id="paypal-button-container"></div>
    </div>
  </div>

  <!-- PayPal SDK 로딩 -->
  <script src="https://www.paypal.com/sdk/js?client-id=AWHGEW3XT1VNiPCk0gFj2vSqQews6R3NFnHE7ROUToVKdVfcJh6z5XJK4yoy3s-vMLW2G_k4zS3rDqkc&currency=USD"></script>

  <!-- Footer Container -->
  <div id="footer-container"></div>

  <!-- Firebase SDK 및 소셜 로그인 스크립트 -->
  <script type="module">
   
    // 가격 조건 행 추가/삭제 기능
    function createPriceRow() {
      const row = document.createElement('div');
      row.className = 'flex gap-2 items-end price-condition-row';
      row.innerHTML = `
        <div class="flex-1">
          <select name="priceType[]" class="input-field mt-2">
            <option value="Free">Free</option>
            <option value="Paid">Paid</option>
            <option value="Freemium">Freemium</option>
          </select>
        </div>
        <div class="flex-1">
          <input type="text" name="priceCondition[]" class="input-field mt-2" placeholder="조건, 단위, 요건 등">
        </div>
        <button type="button" class="btn-secondary px-3 py-2 remove-price-row">-</button>
      `;
      return row;
    }

    document.addEventListener('DOMContentLoaded', function() {
      const priceList = document.getElementById('price-condition-list');
      priceList.addEventListener('click', function(e) {
        if (e.target.classList.contains('add-price-row')) {
          const newRow = createPriceRow();
          priceList.appendChild(newRow);
        }
        if (e.target.classList.contains('remove-price-row')) {
          const row = e.target.closest('.price-condition-row');
          if (row) row.remove();
        }
      });
    });

    function updateFileName(inputId) {
      const input = document.getElementById(inputId);
      const label = document.getElementById(inputId + '-label');
      if (input.files && input.files.length > 0) {
        label.textContent = input.files[0].name;
      } else {
        label.textContent = '파일 선택';
      }
    }

    // PayPal 버튼 설정
    paypal.Buttons({
      style: {
        layout: 'vertical',
        color:  'blue',
        shape:  'rect',
        label:  'paypal',
        height: 45
      },
      createOrder: function(data, actions) {
        return actions.order.create({
          purchase_units: [{
            description: "AI Tool Listing Registration",
            amount: {
              value: '1.00' // 등록 비용 (USD)
            }
          }]
        });
      },
      onApprove: async function(data, actions) {
        return actions.order.capture().then(async function(details) {
          if (window.CommonUtils) {
            window.CommonUtils.showSuccess('결제가 완료되었습니다: ' + details.payer.name.given_name);
          } else {
            alert('결제가 완료되었습니다: ' + details.payer.name.given_name);
          }
          // 폼 데이터 수집
          const formData = new FormData(document.querySelector('form'));
          const formDataObj = {};
          formData.forEach((value, key) => {
            if (key.endsWith('[]')) {
              const baseKey = key.slice(0, -2);
              if (!formDataObj[baseKey]) {
                formDataObj[baseKey] = [];
              }
              formDataObj[baseKey].push(value);
            } else {
              formDataObj[key] = value;
            }
          });
          
          // 결제 정보 추가
          formDataObj.paymentDetails = {
            orderId: details.id,
            payerName: details.payer.name.given_name + ' ' + details.payer.name.surname,
            payerEmail: details.payer.email_address,
            paymentAmount: details.purchase_units[0].amount.value,
            paymentCurrency: details.purchase_units[0].amount.currency_code,
            paymentStatus: details.status
          };

          // Firestore에 데이터 저장
          try {
            const db = window.db;
            const { addDoc, collection } = await import('https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js');
            await addDoc(collection(db, 'submissions'), formDataObj);
            if (window.CommonUtils) {
              window.CommonUtils.showSuccess('신청이 성공적으로 완료되었습니다.');
            } else {
              alert('신청이 성공적으로 완료되었습니다.');
            }
            window.location.href = 'index.html';
          } catch (error) {
            if (window.CommonUtils) {
              window.CommonUtils.handleError(error, '데이터 저장');
            } else {
              console.error('데이터 저장 중 오류 발생:', error);
              alert('데이터 저장 중 오류가 발생했습니다. 관리자에게 문의해주세요.');
            }
          }
        });
      }
    }).render('#paypal-button-container');

    // 신청서 제출 버튼 클릭 이벤트
    const submitBtn = document.getElementById('submitButton');
    if(submitBtn) {
      submitBtn.addEventListener('click', function(e) {
        e.preventDefault();
        // 폼 유효성 검사
        const form = document.querySelector('form');
        if (!form.checkValidity()) {
          form.reportValidity();
          return;
        }
        // 결제 안내 및 PayPal 영역 표시
        document.getElementById('payment-section').style.display = 'block';
        // 스크롤을 결제 영역으로 이동
        document.getElementById('payment-section').scrollIntoView({ 
          behavior: 'smooth',
          block: 'center'
        });
      });
    }
  </script>
</body>
</html>
