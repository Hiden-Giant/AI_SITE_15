<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸ í˜ì´ì§€</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .test-form {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }
        button {
            background: #007bff;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background: #0056b3;
        }
        .debug-info {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
            font-family: monospace;
            font-size: 14px;
        }
        .error {
            color: red;
            background: #ffe6e6;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
        }
        .success {
            color: green;
            background: #e6ffe6;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <h1>ë¡œê·¸ì¸ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸</h1>
    
    <div class="test-form">
        <h2>ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸</h2>
        
        <form id="testLoginForm" onsubmit="return testLogin(event)">
            <div class="form-group">
                <label for="testEmail">ì´ë©”ì¼:</label>
                <input type="email" id="testEmail" name="email" value="test@example.com" required>
            </div>
            
            <div class="form-group">
                <label for="testPassword">ë¹„ë°€ë²ˆí˜¸:</label>
                <input type="password" id="testPassword" name="password" value="password123" required>
            </div>
            
            <button type="submit">ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸</button>
        </form>
        
        <div id="testResult"></div>
    </div>
    
    <div class="debug-info">
        <h3>ë””ë²„ê¹… ì •ë³´</h3>
        <div id="debugInfo">
            <p>í˜ì´ì§€ ë¡œë“œ ì‹œê°„: <span id="loadTime"></span></p>
            <p>AuthManager ìƒíƒœ: <span id="authManagerStatus">í™•ì¸ ì¤‘...</span></p>
            <p>í¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ: <span id="formListenerStatus">í™•ì¸ ì¤‘...</span></p>
        </div>
    </div>
    
    <script>
        // í˜ì´ì§€ ë¡œë“œ ì‹œê°„ ê¸°ë¡
        document.getElementById('loadTime').textContent = new Date().toLocaleString();
        
        // í¼ ì œì¶œ í…ŒìŠ¤íŠ¸ í•¨ìˆ˜
        function testLogin(event) {
            console.log('=== testLogin í•¨ìˆ˜ í˜¸ì¶œë¨ ===');
            
            // ì´ë²¤íŠ¸ ì •ë³´ ë¡œê¹…
            console.log('ì´ë²¤íŠ¸ íƒ€ì…:', event.type);
            console.log('ì´ë²¤íŠ¸ íƒ€ê²Ÿ:', event.target);
            console.log('í¼ ë°ì´í„°:', {
                email: document.getElementById('testEmail').value,
                password: document.getElementById('testPassword').value
            });
            
            // ê¸°ë³¸ ë™ì‘ ì°¨ë‹¨
            event.preventDefault();
            event.stopPropagation();
            
            // ê²°ê³¼ í‘œì‹œ
            const resultDiv = document.getElementById('testResult');
            resultDiv.innerHTML = `
                <div class="success">
                    âœ… í¼ ì œì¶œì´ ì„±ê³µì ìœ¼ë¡œ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤!<br>
                    - ì´ë²¤íŠ¸ íƒ€ì…: ${event.type}<br>
                    - í¼ ID: ${event.target.id}<br>
                    - ìƒˆë¡œê³ ì¹¨ì´ ë°œìƒí•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.
                </div>
            `;
            
            // ì½˜ì†”ì— ì„±ê³µ ë©”ì‹œì§€
            console.log('âœ… í¼ ì œì¶œ ì°¨ë‹¨ ì„±ê³µ - ìƒˆë¡œê³ ì¹¨ ì—†ìŒ');
            
            return false;
        }
        
        // AuthManager ìƒíƒœ í™•ì¸
        function checkAuthManagerStatus() {
            const statusSpan = document.getElementById('authManagerStatus');
            
            if (window.authManager) {
                statusSpan.textContent = `ì´ˆê¸°í™”ë¨ (${window.authManager.isInitialized ? 'ì¤€ë¹„ë¨' : 'ì´ˆê¸°í™” ì¤‘'})`;
                statusSpan.style.color = 'green';
            } else {
                statusSpan.textContent = 'ì´ˆê¸°í™”ë˜ì§€ ì•ŠìŒ';
                statusSpan.style.color = 'red';
            }
        }
        
        // í¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ìƒíƒœ í™•ì¸
        function checkFormListenerStatus() {
            const statusSpan = document.getElementById('formListenerStatus');
            const form = document.getElementById('testLoginForm');
            
            if (form) {
                // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ í™•ì¸ (ê°„ì ‘ì  ë°©ë²•)
                statusSpan.textContent = 'ë“±ë¡ë¨ (onsubmit ì†ì„± í¬í•¨)';
                statusSpan.style.color = 'green';
            } else {
                statusSpan.textContent = 'í¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ';
                statusSpan.style.color = 'red';
            }
        }
        
        // í˜ì´ì§€ ë¡œë“œ í›„ ìƒíƒœ í™•ì¸
        document.addEventListener('DOMContentLoaded', function() {
            console.log('=== í…ŒìŠ¤íŠ¸ í˜ì´ì§€ DOMContentLoaded ===');
            
            // ì´ˆê¸° ìƒíƒœ í™•ì¸
            checkAuthManagerStatus();
            checkFormListenerStatus();
            
            // AuthManager ì¤€ë¹„ ëŒ€ê¸°
            if (window.authManager && !window.authManager.isInitialized) {
                window.addEventListener('authManagerReady', function() {
                    console.log('AuthManager ì¤€ë¹„ë¨ - ìƒíƒœ ì—…ë°ì´íŠ¸');
                    checkAuthManagerStatus();
                });
            }
            
            // 3ì´ˆ í›„ ì¬í™•ì¸
            setTimeout(function() {
                checkAuthManagerStatus();
                checkFormListenerStatus();
            }, 3000);
        });
        
        // ì „ì—­ í¼ ì œì¶œ ì´ë²¤íŠ¸ ê°ì§€
        document.addEventListener('submit', function(event) {
            console.log('ğŸ” ì „ì—­ í¼ ì œì¶œ ì´ë²¤íŠ¸ ê°ì§€:', {
                formId: event.target.id,
                formAction: event.target.action,
                formMethod: event.target.method
            });
        });
        
        // í˜ì´ì§€ ì–¸ë¡œë“œ ë°©ì§€ í…ŒìŠ¤íŠ¸
        window.addEventListener('beforeunload', function(event) {
            console.log('âš ï¸ í˜ì´ì§€ ì–¸ë¡œë“œ ì‹œë„ ê°ì§€');
            // í…ŒìŠ¤íŠ¸ ëª©ì ìœ¼ë¡œëŠ” ì‹¤ì œë¡œ ì°¨ë‹¨í•˜ì§€ ì•ŠìŒ
        });
    </script>
</body>
</html>
